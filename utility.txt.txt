utility function for version two